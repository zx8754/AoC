x <- sort(as.integer(readLines("10_data.txt")))

# part 1 ------------------------------------------------------------------
prod(table(diff(x)) + 1)
# [1] 2046

# part 2 ------------------------------------------------------------------
print(
  prod(c(1, 1, 2, 4, 7)[ 
    match(
      lengths(split(c(0, x),
                    cumsum(c(3, diff(c(x[ 1 ] - 1, x))) == 3))),
      c(1:5)) ]), 
  digits = 22)
# [1] 1157018619904
